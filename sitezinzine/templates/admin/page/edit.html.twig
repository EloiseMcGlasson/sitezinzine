{% extends 'admin/admin.html.twig' %}
{% block stylesheets %}
  <style>
  /* ===== Admin Page Edit (style proche Emission edit) ===== */
.admin-edit-page {
  background: linear-gradient(#E4013A, #B81C61);
  padding: 50px;
  color: white;
  font-family: "Montserrat Alternates", sans-serif;
}

.admin-edit-page h1 {
    margin: 0 0 20px 0;
    text-align: center;
}

.admin-edit-page form {
  padding: 0; /* on gère le padding via le wrapper */
}

/* Layout "lignes" comme émission */
.admin-edit-page .ligne2,
.admin-edit-page .ligne4 {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}

.admin-edit-page .ligne3 {
  width: 100%;
  margin-top: 10px;
}

/* Symfony form rows */
.admin-edit-page .mb-3 {
  margin: 15px 0;
  flex: 1 1 260px;
  min-width: 260px;
}

/* Labels */
.admin-edit-page label,
.admin-edit-page .form-label {
  color: white;
  font-family: "Montserrat Alternates", sans-serif;
  font-weight: normal;
  font-size: 16pt;
  margin-bottom: 10px;
  display: inline-block;
}

/* Inputs texte / select / textarea (PAS checkbox, PAS file) */
.admin-edit-page input:not([type="checkbox"]):not([type="file"]),
.admin-edit-page select,
.admin-edit-page textarea {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

/* File input : on évite le padding énorme */
.admin-edit-page input[type="file"]{
  width: 100%;
  margin: 8px 0;
}

/* Checkbox : style minimal, fiable */
.admin-edit-page input[type="checkbox"]{
  width: auto;
  margin: 0 8px 0 0;
  padding: 0;
}


/* Bloc image actuelle */
.admin-edit-page .current-image {
  flex: 1 1 260px;
  min-width: 260px;
  margin-top: 10px;
}

.admin-edit-page .current-image img {
  max-width: 300px;
  height: auto;
  display: block;
  margin-top: 8px;
  border-radius: 6px;
}

/* TinyMCE : donner de l'air */
.admin-edit-page .tox-tinymce {
  margin: 10px 0 0 0;
}

/* Boutons */
.admin-edit-page .btn {
  margin-top: 10px;
}

/* Boutons admin */
.admin-edit-page .btn {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .65rem 1rem;
  border-radius: 10px;
  border: 1px solid transparent;
  text-decoration: none;
  font-family: "Montserrat Alternates", sans-serif;
  font-weight: 700;
  cursor: pointer;
  transition: transform .08s ease, background-color .15s ease, border-color .15s ease;
}

/* Bouton secondaire (retour) */
.admin-edit-page .btn-secondary {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.18);
  color: #fff;
}

.admin-edit-page .btn-secondary:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.28);
  transform: translateY(-1px);
}

.admin-edit-page .btn-secondary:active {
  transform: translateY(0);
}

/* Petit spacing utilitaire si tu n'as pas Bootstrap */
.admin-edit-page .mb-3 { margin-bottom: 1rem; }

input[readonly] {
  background-color: #f3f3f3;
  color: #666;
  cursor: not-allowed;
}

</style>
{% endblock %}
{% block title %}
  Édition de la page
  {{ page.title }}
{% endblock %}
{% block body %}

  <div class="admin-edit-page">
    <h1>Éditer la page : {{ page.title }}</h1>

    <a href="{{ path('admin.page.index') }}"
       class="btn btn-secondary mb-3"
       aria-label="Retour à la liste des pages">
      ← Retour à la liste des pages
    </a>

    {{ form_start(form) }}

      <div class="ligne2">
        {{ form_row(form.slug) }}
        {{ form_row(form.title) }}
      </div>

      <div class="ligne3"
           data-controller="tinymce"
           data-tinymce-css-value="{{ asset((encore_entry_css_files('app')|last)) }}">
        {{ form_row(form.content) }}
      </div>

      <div class="ligne4">
        {% if form.mainImageFile is defined %}
          {{ form_row(form.mainImageFile) }}

          {% if page.mainImageName is not empty %}
            <div class="current-image">
              <p>Image actuelle :</p>
              <img src="{{ asset('uploads/pages/' ~ page.mainImageName) }}" alt="{{ page.title }}">
            </div>

            {{ form_row(form.deleteMainImage) }}
          {% endif %}
        {% endif %}
      </div>

      <button type="submit" class="btn btn-primary mt-3">
        Enregistrer
      </button>

    {{ form_end(form) }}
  </div>


    {% endblock %}
    