{% extends 'admin/admin.html.twig' %}
{% block title 'Cr√©er un √©v√®nement' %}
{% block body %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.5.6/tinymce.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.5.6/jquery.tinymce.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.5.6/plugins/checklist/plugin.min.js"></script>
  <style>

    h1 {
      text-align: center;
      color: white;
      font-family: "Montserrat Alternates", sans-serif;
      font-weight: 900;
      font-style: normal;
      font-size: 36pt;
      margin: 20px auto; /* Pour centrer verticalement aussi */
  }


  .tox-checklist > li:not(.tox-checklist--hidden) {
  list-style: none;
  margin: 0.25em 0;
  position: relative;
}
.tox-checklist > li:not(.tox-checklist--hidden)::before {
  content: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");
  cursor: pointer;
  height: 1em;
  margin-left: -1.5em;
  margin-top: 0.125em;
  position: absolute;
  width: 1em;
}
.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before {
  content: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");
}

input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=submit] {
  width: 100%;
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=submit]:hover {
  background-color: #45a049;
}

form {
  padding: 50px;
}
div.mb-3 {
  margin: 15px;
}
label {
  margin-bottom: 15px;
}

#mceu_14 {
  margin: 15px 0;
}

textarea {
  width: auto;
}
.form-label { color:white;
font-family: "Montserrat Alternates", sans-serif;
font-weight: normal;
font-style: normal;

font-size: 16pt;
}
input {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}
.bodyadmincreateevenement h1 {
  color:white;
  font-family: "Montserrat Alternates", sans-serif;
  font-weight: 900;
  font-style: normal;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-size: 36pt;
}

.ligne1 {
  display: flex;
  flex-direction: row;
}

.ligne2 {
  display: flex;
  flex-direction: row;
}
</style>
  <div>
  
      <h1>
        Cr√©er un nouvel √©v√®nement
      </h1>
      {{ form_start (form) }}
    <div class="ligne1">
    {{ form_row (form.titre) }}
    {{ form_row (form.organisateur) }}
    {{ form_row (form.type, { 'attr': {'id': 'annonce_type'} }) }}
  <div id="autre-type-wrapper"{% if form.autreType.vars.data %}style="display: block;"{% else %}style="display: none;"{% endif %}>
      {{ form_row (form.autreType, { 'attr': {'id': 'annonce_autreType'} }) }}
  </div>
    </div>
   
<div class="ligne3">
    {{ form_row (form.ville) }}
    {{ form_row (form.departement) }}
    {{ form_row (form.adresse) }}
    </div>
    <div class="ligne4">
    {{ form_row (form.dateDebut) }}
    {{ form_row (form.dateFin) }}
    {{ form_row (form.horaire) }}
    {{ form_row (form.prix) }}
    </div>
    
    <div class="ligne6">  
    {{ form_row (form.presentation) }}
    </div>
    <div class="ligne7">
    {{ form_row (form.contact) }}
    </div>
    {{ form_end (form) }}
    </div>


    <script type="text/javascript" language="javascript">
    tinymce.init(
        {
            selector: "textarea",
            
            plugins: [
                'lists', 'link',
                
              ],
            menubar:false,
            statusbar:false,
            toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | outdent indent | bullist numlist | link",
            spellchecker_dialog: true,
            spellchecker_ignore_list: ['Ephox', 'Moxiecode']
            });
        function ajouter()
        {
            tinymce.triggerSave(true, true);
           
        }

        document.addEventListener("DOMContentLoaded", function() {
          let typeSelect = document.getElementById("evenement_type"); // S√©lection du menu d√©roulant
          let autreTypeWrapper = document.getElementById("autre-type-wrapper"); // S√©lection du div contenant autreType
          let autreTypeInput = document.getElementById("evenement_autreType"); // S√©lection de l'input texte
      
          function toggleAutreType() {
            
              if (!typeSelect) {
                  console.error("‚ö†Ô∏è ERREUR : evenement_type est NULL !");
                  return;
              }
      
              // ‚úÖ V√©rifier avec "autre" en minuscule pour correspondre √† ChoiceType
              if (typeSelect.value.toLowerCase() === "autre") {
                autreTypeInput.style.display = "block"; // üî• Affiche l'input au lieu de juste le div
                autreTypeWrapper.style.display = "block"; // ‚úÖ Afficher le champ si "Autre" est s√©lectionn√©
                  
              } else {
                  autreTypeWrapper.style.display = "none"; // ‚úÖ Cacher le champ sinon
                  autreTypeInput.value = ''; // R√©initialiser si on s√©lectionne autre chose
              }
          }
      
          // ‚úÖ V√©rifie si un type personnalis√© est d√©j√† s√©lectionn√©
          if (typeSelect.value.toLowerCase() === "autre") {
              autreTypeWrapper.style.display = "block";
          }
      
          // Ex√©cuter imm√©diatement pour masquer si n√©cessaire
          toggleAutreType();
      
          // √âcouter les changements sur le select
          typeSelect.addEventListener("change", toggleAutreType);    
      });
      

        document.addEventListener("DOMContentLoaded", function() {
    flatpickr("#evenement_dateDebut", {
        dateFormat: "Y-m-d", // Format YYYY-MM-DD (stock√© proprement)
        altInput: true, // Affiche un format plus lisible
        altFormat: "d/m/Y", // Affichage visuel en format fran√ßais
        locale: "fr", // üî• Met Flatpickr en fran√ßais !
        allowInput: true, // Permet d'√©crire la date √† la main
    });
});
document.addEventListener("DOMContentLoaded", function() {
    flatpickr("#evenement_dateFin", {
      dateFormat: "Y-m-d", // Format YYYY-MM-DD (stock√© proprement)
      altInput: true, // Affiche un format plus lisible
      altFormat: "d/m/Y", // Affichage visuel en format fran√ßais
      locale: "fr", // üî• Met Flatpickr en fran√ßais !
      allowInput: true, // Permet d'√©crire la date √† la main
    });
    });
        </script>
  {% endblock %}
  