{% extends 'admin/admin.html.twig' %}

{% block title %}
    Toutes les catégories !
{% endblock %}

{% block body %}
<style>
    .table {
        border-color: black;
        border: solid;
        
        }
    thead {
        border-color: black;
        border: solid;
        
    }
    th, tr, td {
        border-color: black;
        border: solid;
        
    }
    .table img {
        width: 100px;
    }
    
    
    </style>
    <p>
        <a class="btn btn-primary btn-sm" href="{{ path('admin.categorie.create') }}">
            Créer une nouvelle categorie
        </a>
    </p>
    <article>
        <table class="table">
            <thead>
                <tr>
                    <th>
                        Noms
                    </th>
                    <th>
                        Nombre d'Émissions
                    </th>
                    <th style="width: 200px">
                        Actions
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for categorie in categories %}
                    <tr>
                        {% if categorie.active %}
                        <td>
                            {% else %}
                            <td style="background-color:gray">
                        {% endif %}
                            <a href="{{ path('admin.categorie.show', {id: categorie.id }) }}">
                                {{ categorie.titre }}

                            </a>

                           
                            <p>
                                {% if categorie.thumbnail %}
                                    <img src="{{ vich_uploader_asset(categorie, 'thumbnailFile', 'App\\Entity\\Categories') }}" alt="Photo de {{ categorie.titre }}">
                                    {% endif %}
                                    {{ categorie.descriptif }}
                                </p>
                            </td>
                            <td>
                                {{ categorie.total }}
                            </td>
                            <td>
                                <div class="d-flex gap-1">
                                    <a class="btn btn-primary btn-sm" href="{{ path('admin.categorie.edit', {id: categorie.id}) }}">
                                        Éditer
                                    </a>
                                    <form action="{{ path('admin.categorie.delete', {id: categorie.id}) }}" method="post">
                                        <input type="hidden" name="_method" value="DELETE">
                                            <button type="submit" class="btn btn-danger btn-sm">
                                                Supprimer
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {{ knp_pagination_render(categories) }}
            </article>
        {% endblock %}
        