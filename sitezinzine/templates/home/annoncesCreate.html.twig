{% extends 'base.html.twig' %}
{% block title %}
    Créer une nouvelle annonce
{% endblock %}
{% block body %}
    <style>
    .bodyannonces {
        background: linear-gradient(#E4013A, #B81C61);
        background-size: 100%;
        width: 100%;
        margin: 0%;
        padding: 0%;
       display: flex;
       flex-direction: column;
        font-family: "Montserrat Alternates", sans-serif;
        font-weight: 500;
        font-style: normal;
        font-size: 24px;
        position: relative;
    min-height: 100vh;
        }
        .top img{
        width: 100%;
    }
    
    </style>
    <div class="bodyannonces">
        <div class="top">
            <img src="{{ asset('/images/bottom-header.gif') }}"></div>
            <h1>
                Créer une nouvelle annonce
            </h1>
            {{ form_start (form) }}
            {{ form_row (form.titre) }}
            {{ form_row (form.type, { 'attr': {'id': 'type-select'} }) }}

            <div id="autre-type-wrapper" style="display: none;">
            {{ form_row (form.autreType, { 'attr': {'id': 'autre-type'} }) }}
            </div>

            {{ form_row (form.organisateur) }}
            {{ form_row (form.ville) }}
            {{ form_row (form.departement) }}
            {{ form_row (form.adresse) }}
            {{ form_row (form.dateDebut) }}
            {{ form_row (form.dateFin) }}
            {{ form_row (form.horaire) }}
            {{ form_row (form.prix) }}
            {{ form_row (form.presentation) }}
            {{ form_row (form.contact) }}
            {{ form_end (form) }}
        </div>

        <script defer>
    document.addEventListener("DOMContentLoaded", function() {
        let typeSelect = document.getElementById("annonce_type"); // Sélection du menu déroulant
        let autreTypeWrapper = document.getElementById("autre-type-wrapper"); // Sélection du div contenant le label + input

        function toggleAutreType() {
            if (!typeSelect) {
                console.error("⚠️ ERREUR : annonce_type est NULL !");
                return;
            }

            console.log("Valeur sélectionnée :", typeSelect.value);
            
            if (typeSelect.value === "autre") {
                autreTypeWrapper.style.display = "block"; // ✅ Afficher tout le bloc (label + input)
            } else {
                autreTypeWrapper.style.display = "none"; // ✅ Cacher tout le bloc
            }
        }

        // Exécuter immédiatement au chargement pour masquer si nécessaire
        toggleAutreType();

        // Écouter le changement de sélection
        typeSelect.addEventListener("change", toggleAutreType);
    });
</script>



    {% endblock %}
    