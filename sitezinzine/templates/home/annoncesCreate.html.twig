{% extends 'base.html.twig' %}
{% block title %}
    Créer une nouvelle annonce
{% endblock %}
{% block body %}
<style>
    .bodyannonces {
        background: linear-gradient(#E4013A, #B81C61);
        background-size: 100%;
        width: 100%;
        margin: 0%;
        padding: 0%;
       display: flex;
       flex-direction: column;
        font-family: "Montserrat Alternates", sans-serif;
        font-weight: 500;
        font-style: normal;
        font-size: 24px;
        position: relative;
    min-height: 100vh;
        }
        .top img{
        width: 100%;
    }
    
    </style>
<div class="bodyannonces">
    <div class="top">
        <img src="{{ asset('/images/bottom-header.gif') }}"></div>
        <h1>
            Créer une nouvelle annonce
        </h1>
        {{ form_start (form) }}
        {{ form_row (form.titre) }}

        {{ form_row (form.type, { 'attr': {'id': 'annonce_type'} }) }}

        <div id="autre-type-wrapper" {% if form.autreType.vars.data %} style="display: block;" {% else %} style="display: none;" {% endif %}>
            {{ form_row (form.autreType, { 'attr': {'id': 'annonce_autreType'} }) }}
        </div>
        
        {{ form_row (form.organisateur) }}
        {{ form_row (form.ville) }}
        {{ form_row (form.departement) }}
        {{ form_row (form.adresse) }}
        {{ form_row (form.dateDebut) }}
        {{ form_row (form.dateFin) }}
        {{ form_row (form.horaire) }}
        {{ form_row (form.prix) }}
        {{ form_row (form.presentation) }}
        {{ form_row (form.contact) }}
        {{ form_end (form) }}
    </div>


<script defer>
document.addEventListener("DOMContentLoaded", function() {
    let typeSelect = document.getElementById("annonce_type"); // Sélection du menu déroulant
    let autreTypeWrapper = document.getElementById("autre-type-wrapper"); // Sélection du div contenant autreType
    let autreTypeInput = document.getElementById("annonce_autreType"); // Sélection de l'input texte

    function toggleAutreType() {
        function toggleAutreType() {
        if (!typeSelect || !autreTypeWrapper || !autreTypeInput) {
            console.error("⚠️ ERREUR : Un élément est introuvable !");
            return;
        }

        // ✅ Vérifier avec "autre" en minuscule pour correspondre à ChoiceType
        if (typeSelect.value.toLowerCase() === "autre") {
            autreTypeWrapper.style.display = "block"; // ✅ Afficher le champ si "Autre" est sélectionné
            autreTypeInput.style.display = "block"; // ✅ Afficher le champ si "Autre" est sélectionné
        } else {
            autreTypeWrapper.style.display = "none"; // ✅ Cacher le champ sinon
            autreTypeInput.value = ''; // Réinitialiser si on sélectionne autre chose
        }
    }

    // ✅ Vérifie si un type personnalisé est déjà sélectionné
    if (typeSelect.value.toLowerCase() === "autre") {
        autreTypeWrapper.style.display = "block";
    }

    // Exécuter immédiatement pour masquer si nécessaire
    toggleAutreType();

    // Écouter les changements sur le select
    typeSelect.addEventListener("change", toggleAutreType);
});
</script>


    <script type="text/javascript" language="javascript">
    tinymce.init(
        {
            selector: "textarea",
           
            plugins: [
                'lists', 'link', 'preview'
                
              ],
            menubar:false,
            statusbar:false,
            toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | outdent indent | bullist numlist | link",
            
            });
        
        {
            tinymce.triggerSave(true, true);
           
        }
        </script>

{% endblock %}
    
    