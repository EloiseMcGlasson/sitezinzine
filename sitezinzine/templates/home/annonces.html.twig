{% extends 'base.html.twig' %}
{% block title %}
    Annonces des auditeurices !
{% endblock %}
{% block body %}

<style>
  /* =========================
     Annonces – sécurité
     ========================= */
  .annonces-grid,
  .annonces-grid *{
    box-sizing: border-box;
  }

  /* =========================
     Titre + CTA
     ========================= */
  .annonces-title{
    text-align: center;
    color: #fff;
    font-family: "Montserrat Alternates", sans-serif;
    font-weight: 900;
    font-size: clamp(24px, 4vw, 36px);
    margin: 24px 0 12px;
  }

  .annonces-create{
    text-align: center;
    margin-bottom: 32px;
  }

  .btn-create-annonce{
    display: inline-block;
    padding: 10px 20px;
    font-size: 1rem;
    font-weight: 700;
    color: #000;
    background: #fff;
    border-radius: 999px;
    border: 3px solid #000;
    text-decoration: none;
    box-shadow: 3px 6px 12px rgba(0,0,0,0.4);
  }

  .btn-create-annonce:hover{
    background: #E40039;
    color: #000;
  }

  /* =========================
     Grille principale
     ========================= */
  .annonces-grid{
    display: grid;

    /* Desktop : 2 colonnes stables */
    grid-template-columns: repeat(2, minmax(0, 1fr));

    gap: 24px;
    padding: 0 24px 48px;
    max-width: 1400px;
    margin: 0 auto;
  }

  /* =========================
     Carte annonce
     ========================= */
  .annonce-card{
    display: grid;
    grid-template-columns: 120px minmax(0, 1fr);
    gap: 16px;

    background: #000;
    border-radius: 12px;
    padding: 16px;
    color: #fff;
    border: 1px solid #444;
    transition: transform 0.2s ease, background 0.2s ease;
  }

  .annonce-card:hover{
    transform: translateY(-3px);
    background: #222;
  }

  .annonce-image img{
    width: 100%;
    height: auto;
    display: block;
    border-radius: 8px;
    object-fit: cover;
  }

  .annonce-content{
    min-width: 0;
  }

  .annonce-title{
    font-size: 1.1rem;
    font-weight: 800;
    margin: 0 0 6px;
  }

  .annonce-title a{
    color: #fff;
    text-decoration: none;
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  .annonce-title a:hover{
    color: #E40039;
  }

  .annonce-meta,
  .annonce-dates{
    font-size: 0.85rem;
    color: #ccc;
    margin-bottom: 6px;
  }

  .annonce-presentation{
    font-size: 0.9rem;
    color: #ddd;
    line-height: 1.4;

    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* =========================
     Responsive (robuste)
     ========================= */

  /* <= 900px : 1 colonne (inclut beaucoup de mobiles landscape) */
  @media (max-width: 900px){
    .annonces-grid{
      grid-template-columns: 1fr;
      padding: 0 16px 32px;
      gap: 18px;
    }
  }

  /* <= 600px : la card passe en colonne (image au-dessus) */
  @media (max-width: 600px){
    .annonce-card{
      grid-template-columns: 1fr;
    }

    .annonce-image{
      max-width: 320px;
      width: 100%;
      margin: 0 auto;
    }
  }
</style>

  

  <h1 class="annonces-title">Les annonces des auditeurices</h1>

  <p class="annonces-create">
    <a class="btn-create-annonce" href="{{ path('annonce.create') }}">
      Créer une nouvelle annonce
    </a>
  </p>

  <article class="annonces-grid">
    {% for annonce in annonces %}
      <section class="annonce-card">
        <div class="annonce-image">
          {% if annonce.thumbnail %}
            <img
              src="{{ vich_uploader_asset(annonce, 'thumbnailFile') }}"
              alt="Photo de {{ annonce.titre }}"
            >
          {% endif %}
        </div>

        <div class="annonce-content">
          <div class="annonce-type">{{ annonce.type }}</div>

          <h2 class="annonce-title">
            <a href="{{ path('annonce.show', { id: annonce.id }) }}">
              {{ annonce.titre }}
            </a>
          </h2>

          <div class="annonce-meta">
            <span>{{ annonce.organisateur }}</span> ·
            <span>{{ annonce.ville }} ({{ annonce.departement }})</span>
          </div>

          <div class="annonce-dates">
            {{ annonce.dateDebut|date('d/m/Y') }}
            –
            {{ annonce.dateFin|date('d/m/Y') }}
            · {{ annonce.horaire }}
          </div>

          <div class="annonce-presentation">
            {{ annonce.presentation|raw }}
          </div>
        </div>
    </section>
    {% endfor %}
  </article>

{% endblock %}

            
    