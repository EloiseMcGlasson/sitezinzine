{% extends 'base.html.twig' %}

{% block title %}Annonce : {{ annonce.titre }}{% endblock %}

{% block body %}


<div
  class="annonce-show"
  data-controller="image-modal"
  data-action="keydown@window->image-modal#onKeydown"
>
  <article class="annonce-card">

    {% if annonce.thumbnail %}
      <button
        type="button"
        class="annonce-hero"
        aria-label="Agrandir l'image"
        data-action="click->image-modal#open"
        data-image-modal-src-value="{{ vich_uploader_asset(annonce, 'thumbnailFile') }}"
        data-image-modal-alt-value="Photo de {{ annonce.titre }}"
      >
        <img
          src="{{ vich_uploader_asset(annonce, 'thumbnailFile') }}"
          alt="Photo de {{ annonce.titre }}"
          loading="lazy"
        >
      </button>
    {% endif %}

    <div class="annonce-body">
      <h1 class="annonce-title">{{ annonce.titre }}</h1>

      <div class="annonce-infos">
        <div class="annonce-info-block">
          <p><strong>Organisateur :</strong> {{ annonce.organisateur }}</p>
          <p><strong>Lieu :</strong> {{ annonce.ville }} ({{ annonce.departement }})</p>
          <p><strong>Adresse :</strong> {{ annonce.adresse }}</p>
        </div>

        <div class="annonce-info-block">
          <p><strong>Date :</strong> Du {{ annonce.dateDebut|date('d/m/Y') }} au {{ annonce.dateFin|date('d/m/Y') }}</p>
          <p><strong>Horaires :</strong> {{ annonce.horaire }}</p>
          <p><strong>Prix :</strong> {{ annonce.prix }}</p>
        </div>
      </div>

      <section class="annonce-section">
        <h3>Présentation</h3>
        <div class="richtext">
          {{ annonce.presentation|raw }}
        </div>
      </section>

      <section class="annonce-section">
        <h3>Informations supplémentaires</h3>
        <p><strong>Type :</strong> {{ annonce.type }}</p>
      </section>

      <section class="annonce-section">
        <h3>Contact</h3>
        <p><strong>Email/Téléphone :</strong> {{ annonce.contact }}</p>
      </section>
    </div>
  </article>

  {# Modal #}
  <div
    class="img-modal"
    aria-hidden="true"
    data-image-modal-target="modal"
    data-action="click->image-modal#backdropClick"
  >
    <button
      type="button"
      class="img-modal__close"
      aria-label="Fermer"
      data-action="click->image-modal#close"
    >
      &times;
    </button>

    <img class="img-modal__content" alt="" data-image-modal-target="image">
  </div>
</div>
{% endblock %}
