<div {{ attributes.defaults({ 'data-controller': 'live' }) }}>
  <div id="theme-filter-buttons" class="flex flex-wrap gap-2 mb-4">
    {% for theme in this.themesInGroup %}
      {% set isActive = (this.selected|length == 1) and (this.selected[0] == theme.id) %}
      <button
        type="button"
        class="theme-card-button {{ isActive ? 'active' : '' }}"
        aria-pressed="{{ isActive ? 'true' : 'false' }}"
        title="{{ theme.name }}"
        data-action="live#action"
        data-live-action-param="toggleTheme"
        data-live-id-param="{{ theme.id }}"
      >
        <div class="theme-card-background"
             style="width:180px;height:120px;border-radius:8px;overflow:hidden;position:relative;
                    background-size:cover;background-position:center;
                    background-image:url('{{ theme.thumbnail
                      ? vich_uploader_asset(theme, 'thumbnailFile', 'App\\Entity\\Theme')
                      : asset('images/emission-zinzine.jpg') }}');">
          <div class="theme-card-overlay"
               style="position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.6);
                      color:#fff;padding:.5rem;font-weight:700;text-align:center;">
            {{ theme.name }}
          </div>
        </div>
      </button>
    {% endfor %}
  </div>

  {% include 'partials/_emission_results.html.twig' with {
  emissions: this.relatedEmissions,
  showNoResults: true,
  resultsTitle: 'Émissions liées :',
  noResultsText: (this.selected|length == 1)
    ? 'Aucune émission ne correspond à ce thème.'
    : 'Aucune émission liée trouvée.',
  useKnpPagination: false,
  useLivePagination: true,
  liveCurrentPage: this.page
} only %}

</div>
